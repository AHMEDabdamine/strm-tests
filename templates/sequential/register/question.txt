{% set debug = True %}
{% import "sequential/macros/flipmacros.txt" as flpmacromd%}
{% import "sequential/macros/timingmacros.txt" as tmmacro%}

## Register

{% if RENDER_MODE == "question" %}

Let have the following setup  

<div class="arabic">
إليك هذا التركيب
</div>

{{flpmacromd.draw_register_generic(        flips_list=register_data.flip_type_list,
        outputs=register_data.outputs,
        size=register_data.nbits,
        shift=register_data.shift
    )|normalize_newlines}}


Cite the truth table of flipflop {{register_data.flip_type_list[0]}}.  

<div class="arabic">
اذكر جدول الحقيقة للقلاب <span class="lr">{{register_data.flip_type_list[0]}}</span>.
</div>

Complete the following timing diagram, according to given flipflop.  

<div class="arabic">
أكمل المخطط المنطقي الآتي، حسب القلاب المعطى.
</div>

{{tmmacro.draw_timing_diagram(data, mode="question")|normalize_newlines}}

{% endif %}

---

{% if RENDER_MODE == "answer" %}

Cite the truth table of flipflop {{register_data.flip_type_list[0]}}.  

<div class="arabic">
اذكر جدول الحقيقة للقلاب <span class="lr">{{register_data.flip_type_list[0]}}</span>.
</div>

{{flpmacromd.truth_table(
    type=register_data.flip_type_list[0],
    edge="rising"
)}}

{{tmmacro.draw_timing_diagram(data, mode="answer")|normalize_newlines}}

{% endif %}

---

{% if debug and RENDER_MODE == "answer" %}
**Register**

{{flpmacromd.draw_register_generic(flips_list=["D","JK","RST"], outputs=["Q0","Q1","Q2"], size=3)|normalize_newlines}}


**Register n bits**

{{flpmacromd.draw_register(flip="D", register_type="", size=6)|normalize_newlines}}


**Register n bits JK**

{{flpmacromd.draw_register(flip="JK", register_type="", size=6)|normalize_newlines}}


Test inverse connection  

{{flpmacromd.draw_register_generic(
        flips_list=register_data.flip_type_list,
        outputs=register_data.outputs,
        size=register_data.nbits,
        shift=register_data.shift,
        link_type="inverse",
    )|normalize_newlines}}


Test clock connection  


{{flpmacromd.draw_register_generic(
        flips_list=register_data.flip_type_list,
        outputs=register_data.outputs,
        size=register_data.nbits,
        shift=register_data.shift,
        link_type="clock",
    )|normalize_newlines}}


Test inverse clock connection  

{{flpmacromd.draw_register_generic(
        flips_list=register_data.flip_type_list,
        outputs=register_data.outputs,
        size=register_data.nbits,
        shift=register_data.shift,
        link_type="inverse_clock",
)|normalize_newlines}}


{% endif %}


