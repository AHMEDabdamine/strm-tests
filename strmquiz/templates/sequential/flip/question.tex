{% import "sequential/macros/flipmacros.tex" as flpmacro%}

{#----------------------------------------------------------
 Main_call
----------------------------------------------------------#}
{#  --------------- Define basic flips -------#}
{{ flpmacro.define_basic_flip(type="D", id="DMod", output_var="Q2")}}
{{ flpmacro.define_basic_flip(type="JK", id="JKMod", output_var="Q0")}}
{{ flpmacro.define_basic_flip(type="RS", id="RSMod", output_var="Q1")}}
{{ flpmacro.define_basic_flip(type="jkasyn", id="JKAMod", output_var="Q")}}


\section{Flip}
{{ flpmacro.truth_table("D")}}

{{ flpmacro.truth_table("JK")}}

{{ flpmacro.truth_table("JK", edge="falling")}}

{{ flpmacro.truth_table("RS")}}

{{ flpmacro.truth_table("Dlatch")}}

{{ flpmacro.truth_table("jkasyn")}}

{{ flpmacro.truth_table("custom")}}
{{ flpmacro.truth_table("customX")}}

%---------------------------------------------------

\begin{circuitikz}
{{ flpmacro.place_flip(id="JKMod", name="JK0", xpos=2, ypos=4)}}
{{ flpmacro.place_flip(id="DMod", name="D0", xpos=2, ypos=0)}}
{{ flpmacro.place_flip(id="RSMod", name="RS0", xpos=5, ypos=4)}}

{{ flpmacro.place_flip(id="DMod", name="D1", xpos=2, ypos=8)}}
{{ flpmacro.place_flip(id="RSMod", name="RS1", xpos=5, ypos=8)}}
{{ flpmacro.place_flip(id="JKMod", name="JK1", xpos=8, ypos=8)}}
{{ flpmacro.place_flip(id="JKMod", name="JK2", xpos=11, ypos=8)}}
{{ flpmacro.place_flip(id="DMod", name="D2", xpos=14, ypos=8)}}

{{ flpmacro.draw_clock(name="Ck", label="H", xpos=0, ypos=6)}}

{{ flpmacro.link_clock (name_clock="Ck", name_target="D1", type_target="d")}}
{{ flpmacro.link_clock (name_clock="Ck", name_target="JK1", type_target="jk")}}

{{ flpmacro.link(name_source="D1", name_target="RS1", type_target="rs", method="direct")}}
{{ flpmacro.link(name_source="RS1", name_target="JK1", type_target="jk", method="inverse")}}
{{ flpmacro.link(name_source="JK1", name_target="JK2", type_target="rs", method="clock")}}
{{ flpmacro.link(name_source="JK1", name_target="JK2", type_target="jk", method="clock")}}
{{ flpmacro.link(name_source="JK2", name_target="D2", type_target="d", method="inverse_clock")}}
{{ flpmacro.link(name_source="JK2", name_target="D2", type_target="d", method="clock")}}
\end{circuitikz}


