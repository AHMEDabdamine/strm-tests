<!--quiz.html-->
<!DOCTYPE html>
{% set debug= True %}
<html>
<head>
    <style>
.loader {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #3498db;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  display: inline-block;
  margin-right: 8px;
  vertical-align: middle;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
.hint {
  font-size: 0.85em;
  color: #666;
  margin-top: 2px;
  margin-bottom: 8px;
}
</style>
<link rel="icon" href="{{ url_for('static', path='favicon.ico') }}">

    <title>Quiz</title>
<script>   // This will be filled by Jinja as JSON
        const commandsInfo = {{ commands_dict_json | safe }};
        const categoryCommands = {{ category_commands_json | safe }};
</script>
<!--<script src="{{ url_for('static', path='webui.js') }}"></script>-->
</head>
<body>
    <h2>Select Command to generate a Quiz</h2>
<!--    <form method="post" action="/submit">-->
    <div style="display:flex; gap:20px;">
  <!-- Left: form -->
  <div style="flex:1;">


    <form id="quizForm">
                <div>
        <select id="selectcategory" name="category" onchange="updateCommands()">
            <option value="random" selected> Random Category</option>
            {% for cat_key, cat_value in categories_dict.items() %}
                <option value="{{cat_key}}">{{cat_value.short}}</option>
            {% endfor %}
        </select>
<div class="hint">Choose a category to filter commands.</div>
        </div>
        <div>
  <label for="selectcommand">Command</label>
        <select id="selectcommand" name="command">
            <option value="random" selected>Random Question</option>
            <!-- will be updated dynamically -->
        </select>
  <div id="commandHint" class="hint"></div>
        </div>
        <select id="selectformat" name="outformat">
            <option value="html"selected>HTML</option>
            <option value="tex">Tex</option>
        </select>
        <select id="selectquiz" name="quiz_id">
            <option value="random"selected>Random</option>
            {% for  qi in quiz_id_list %}
            <option value="{{qi}}"selected>{{qi}}</option>
            {% endfor %}
            <!-- will be updated dynamically -->
        </select>
 <div id="argsForm"></div>
        <input name="random" id="random" type="checkbox"/> random data for question.<br/>
        <button type="submit">Submit</button>
        <button type="button" onclick="resetForm()">Reset</button>
    </form>

  </div>

  <!-- Right: preview panel -->
  <div style="flex:1; border:1px solid #ccc; padding:10px;">
    <h3>Preview</h3>
      <div id="exampleDiv" style="margin-top:15px; padding:10px; border:1px dashed #aaa;">
  Select a command to see an example question here.
</div>

    <div id="previewPanel">Select options to preview question...</div>
  </div>
</div>

    {% if debug %}
    <h1> commands json </h1>
    <pre>{{ commands_dict_json }};</pre>
    {%endif%}

    <div id="spinner" style="display:none; text-align:center; margin-top:10px;">
  <div class="loader"></div>
  <p>Generating quiz...</p>
</div>
<div id="resultDiv" style="margin-top: 20px; border: 1px solid #ccc; padding: 10px;">
    <pre id="resultPre">Result will appear here...</pre>
</div>
</body>
<script src="{{ url_for('static', path='webui.js') }}"></script>
</html>

